<% content_for :title, t('.title') %>

<main class="content-container">
  <%= render "shared/flash" %>

  <div class="page-header">
    <h1><%= t('.title') %></h1>
    <%= link_to t('bibliotecarios.new.title'), new_bibliotecario_path, class: "btn btn-primary" %>
  </div>

  <%= form_with(url: bibliotecarios_path, method: :get, local: true) do %>
    <%= label_tag :search, "Buscar: " %>
    <%= text_field_tag :search, params[:search], placeholder: "Procurar pelo email" %>
  <% end %>

  <table class="content-table">
    <thead>
      <tr>
        <th><%= Bibliotecario.human_attribute_name(:nome) %></th>
        <th><%= Bibliotecario.human_attribute_name(:email) %></th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <% @bibliotecarios.each do |bibliotecario| %>
        <%= render "bibliotecario_row", bibliotecario: bibliotecario %>
      <% end %>
    </tbody>
  </table>

  <% if @total_pages.to_i > 1 %>
    <div>
      <% if @page > 1 %>
        <%= link_to "←", url_for(request.params.merge(page: @page - 1))%>
      <% else %>
        <span>←</span>
      <% end %>
      <span>Page <%= @page %> of <%= @total_pages %></span>
      <% if @page < @total_pages %>
        <%= link_to "→", url_for(request.params.merge(page: @page + 1))%>
      <% else %>
        <span>→</span>
      <% end %>
    </div>
  <% end %>
</main>